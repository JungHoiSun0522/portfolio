# π’¬ TCP λ©€ν‹° μ μ € μ±„ν… ν”„λ΅κ·Έλ¨

<p align="center">
  <strong>WinSock κΈ°λ° TCP μ„λ²„(MFC)μ™€ WPF ν΄λΌμ΄μ–ΈνΈλ΅ κµ¬ν„ν• λ©€ν‹° μ μ € μ±„ν… ν”„λ΅μ νΈ</strong>
</p>

<p align="center">
  <sub>Low-level Socket Programming Β· Multi-threaded Server Β· Windows</sub>
</p>

---

## π“ ν”„λ΅μ νΈ κ°μ”

λ³Έ ν”„λ΅μ νΈλ” WinSock APIλ¥Ό μ§μ ‘ μ‚¬μ©ν•μ—¬ TCP μ„λ²„λ¥Ό κµ¬ν„ν•κ³ ,  
MFC κΈ°λ° μ„λ²„μ™€ WPF κΈ°λ° ν΄λΌμ΄μ–ΈνΈλ΅ κµ¬μ„±ν• λ©€ν‹° μ μ € μ±„ν… ν”„λ΅μ νΈμ…λ‹λ‹¤.

μ„λ²„λ” ν•λ‚μ listen μ†μΌ“μΌλ΅ λ‹¤μμ ν΄λΌμ΄μ–ΈνΈ μ ‘μ†μ„ μ²λ¦¬ν•λ©°,  
κ° ν΄λΌμ΄μ–ΈνΈλ” μ „μ© μ¤λ λ“μ—μ„ μ†΅μμ‹ μ„ μν–‰ν•©λ‹λ‹¤.  
ν΄λΌμ΄μ–ΈνΈλ” UI μ¤λ λ“μ™€ λ„¤νΈμ›ν¬ μ¤λ λ“λ¥Ό λ¶„λ¦¬ν•μ—¬  
λ„¤νΈμ›ν¬ λ€κΈ° μ¤‘μ—λ„ UIκ°€ λ©μ¶”μ§€ μ•λ„λ΅ κµ¬μ„±ν–μµλ‹λ‹¤.

---

## π›  κ°λ° ν™κ²½

| κµ¬λ¶„ | λ‚΄μ© |
|---|---|
| **IDE** | Visual Studio 2019 |
| **Server** | C++ / MFC / WinSock2 (TCP) |
| **Client** | C# / WPF (.NET Framework 4.7.2) |
| **Encoding** | UTF-8 |
| **OS** | Windows10 |

---

## π§© μ „μ²΄ κµ¬μ΅°

```text
Client (WPF)
   β””β”€ TCP Socket
        β†“
Server (MFC)
   β”β”€ Listen Socket
   β”β”€ Accept Thread
   β”β”€ Client Thread (1 per client) // ν΄λΌμ΄μ–ΈνΈλ§λ‹¤ κ°λ³„ μ“°λ λ“ μƒμ„±
   β””β”€ Broadcast Logic
```

- λ‹¨μΌ listen μ†μΌ“μΌλ΅ μ ‘μ† μ”μ²­ μμ‹   
- accept μ΄ν›„ ν΄λΌμ΄μ–ΈνΈ μ „μ© μ†μΌ“ μƒμ„±  
- ν΄λΌμ΄μ–ΈνΈλ§λ‹¤ λ…λ¦½μ μΈ μ†΅μμ‹  μ¤λ λ“ μ΄μ  
- μ„λ²„μ—μ„ μμ‹ ν• λ©”μ‹μ§€λ¥Ό λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬  

---

## β™ μ„λ²„ μ£Όμ” κµ¬ν„ λ‚΄μ© (MFC)

### β–Έ Listen / Accept κµ¬μ΅°
- socket β†’ bind β†’ listen μμΌλ΅ μ„λ²„ μ†μΌ“ μ΄κΈ°ν™”  
- listenμ€ μ„λ²„ μ†μΌ“μ„ μμ‹  λ€κΈ° μƒνƒλ΅ μ „ν™ν•λ” μ©λ„λ΅ 1νλ§ νΈμ¶  
- accept μ „μ© μ¤λ λ“μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ—°κ²° μ²λ¦¬  

### β–Έ λ©€ν‹° ν΄λΌμ΄μ–ΈνΈ κ΄€λ¦¬
- μ ‘μ†λ ν΄λΌμ΄μ–ΈνΈλ¥Ό vector<CLIENT_INFO>λ΅ κ΄€λ¦¬  
- CLIENT_INFO κµ¬μ„±  
  - SOCKET  
  - ν΄λΌμ΄μ–ΈνΈ IP λ¬Έμμ—΄  
- λ™μ‹ μ ‘κ·Ό λ³΄νΈλ¥Ό μ„ν•΄ CCriticalSection μ‚¬μ©  

### β–Έ ν΄λΌμ΄μ–ΈνΈ μ¤λ λ“ λ¨λΈ
- ν΄λΌμ΄μ–ΈνΈλ§λ‹¤ μ „μ© μ¤λ λ“ μƒμ„±  
- recv λ°ν™κ°’ κΈ°μ¤€ λ¶„κΈ° μ²λ¦¬  
  - recv > 0 : μ •μƒ λ©”μ‹μ§€ μμ‹   
  - recv == 0 : ν΄λΌμ΄μ–ΈνΈ μ—°κ²° μΆ…λ£  
  - recv < 0 : ν†µμ‹  μ¤λ¥  
- μ—°κ²° μΆ…λ£ μ‹ ν΄λΌμ΄μ–ΈνΈ λ©λ΅μ—μ„ μ κ±°  

### β–Έ λ©”μ‹μ§€ λΈλ΅λ“μΊμ¤νΈ
- λ©”μ‹μ§€λ¥Ό λ³΄λ‚Έ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ μ™Έν• λ‚λ¨Έμ§€ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬  
- μ ‘μ†/ν•΄μ  μ•λ¦Ό λ©”μ‹μ§€μ™€ μΌλ° μ±„ν… λ©”μ‹μ§€ κµ¬λ¶„ μ²λ¦¬  

### β–Έ μ„λ²„ μΆ…λ£ μ²λ¦¬
- μ„λ²„ μΆ…λ£ μ‹ listen μ†μΌ“ closesocketμΌλ΅ accept μ°¨λ‹¨  
- κ°•μ  μ¤λ λ“ μΆ…λ£ ν•¨μ λ―Έμ‚¬μ©  
- μ¤λ λ“κ°€ μμ—°μ¤λ½κ² μΆ…λ£λλ„λ΅ μ„¤κ³„  

---

## π”¤ λ¬Έμμ—΄ μ²λ¦¬ λ° μΈμ½”λ”©

- λ„¤νΈμ›ν¬ ν†µμ‹ μ€ UTF-8 λ¬Έμμ—΄ κΈ°μ¤€  
- μ„λ²„ λ‚΄λ¶€μ—μ„λ” CString μ‚¬μ©  
- UTF-8 λ¬Έμμ—΄κ³Ό CString κ°„ λ³€ν™μ„ λ…μ‹μ μΌλ΅ μ²λ¦¬ν•μ—¬  
  ν•κΈ€ λ©”μ‹μ§€ κΉ¨μ§ λ¬Έμ λ¥Ό ν•΄κ²°  

---

## π–¥ ν΄λΌμ΄μ–ΈνΈ μ£Όμ” κµ¬ν„ λ‚΄μ© (WPF)

### β–Έ UI / λ„¤νΈμ›ν¬ μ¤λ λ“ λ¶„λ¦¬
- λ„¤νΈμ›ν¬ ν†µμ‹ μ€ λ³„λ„ μ¤λ λ“μ—μ„ μν–‰  
- UI κ°±μ‹ μ€ Dispatcher.Invokeλ¥Ό ν†µν•΄ UI μ¤λ λ“μ—μ„ μ²λ¦¬  
- λ„¤νΈμ›ν¬ λ€κΈ° μ¤‘ UI ν”„λ¦¬μ§• ν„μƒ λ°©μ§€  

### β–Έ μ±„ν… λ΅κ·Έ UI
- ListBox κΈ°λ° μ±„ν… λ΅κ·Έ μ¶λ ¥  
- μƒ λ©”μ‹μ§€ μμ‹  μ‹ μλ™μΌλ΅ λ§μ§€λ§‰ ν•­λ©μΌλ΅ μ¤ν¬λ΅¤  
- μ‚¬μ©μκ°€ μ¤‘κ°„ ν•­λ©μ„ μ„ νƒν•λ”λΌλ„ μ΄ν›„ λ©”μ‹μ§€λ” λ‹¤μ‹ ν•λ‹¨μΌλ΅ μ΄λ™  

### β–Έ μ ‘μ† / ν•΄μ  μ²λ¦¬
- μ„λ²„ μ ‘μ† λ° ν•΄μ  μ‹ μ†μΌ“ μƒνƒ μ•μ „ν•κ² κ΄€λ¦¬  
- μ—°κ²° μ¤‘ ν•΄μ  μ‹ λ°μƒν•λ” μμ™Έ μƒν™© μ²λ¦¬  

---

## β–¶ μ‹¤ν–‰ λ°©λ²•

```bash
git clone -b 4th_pjt --single-branch https://github.com/JungHoiSun0522/portfolio.git
```

1. μ„λ²„ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰  
2. ν΄λΌμ΄μ–ΈνΈμ—μ„ μ΄λ―Έ μ„¤μ •λ μ„λ²„ IP λ° ν¬νΈλ΅ μ ‘μ†  
3. λ©”μ‹μ§€ μ†΅μμ‹   

## β  ν•κ³„ λ° κ°μ„  λ°©ν–¥

- IOCP κΈ°λ° λΉ„λ™κΈ° μ„λ²„ κµ¬μ΅° λ―Έμ μ©  
- TLS/μ•”νΈν™” ν†µμ‹  λ―Έμ μ©  
- μ±„ν…λ°© λ¶„λ¦¬ λ° μ‚¬μ©μ μ‹λ³„ κΈ°λ¥ λ―Έκµ¬ν„  

---

## π“‚ μ €μ¥μ† κµ¬μ΅°

```text
ChatProject/
β”β”€ Server_MFC/
β”‚  β”β”€ *.cpp
β”‚  β”β”€ *.h
β”‚  β””β”€ Resource/
β”β”€ Client_WPF/
β”‚  β”β”€ *.xaml
β”‚  β””β”€ *.cs
β””β”€ README.md
```

---

## π“Έ ν…μ¤νΈ ν™”λ©΄
| κΈ°λ³Έ ν™”λ©΄ | λ‚΄λ¶€ IPλ΅ μ ‘μ†ν• ν΄λΌμ΄μ–ΈνΈ | μ™Έλ¶€ IPλ΅ μ ‘μ†ν• ν΄λΌμ΄μ–ΈνΈ | κ°•μ  μ„λ²„ μΆ…λ£ | μ„λ²„ μ •μƒ μΆ…λ£ |
|:---:|:---:|:---:|:---:|:---:|
| ![κΈ°λ³Έ ν™”λ©΄](test_img/κΈ°λ³Έ.jpg) | ![λ‚΄λ¶€ IPλ΅ μ ‘μ†ν• ν΄λΌμ΄μ–ΈνΈ](test_img/λ‚΄λ¶€IP.gif) | ![μ™Έλ¶€ IPλ΅ μ ‘μ†ν• ν΄λΌμ΄μ–ΈνΈ](test_img/μ™Έλ¶€IP.gif) | ![κ°•μ  μ„λ²„ μΆ…λ£](test_img/κ°•μ %20μΆ…λ£.JPG) | ![μ„λ²„ μ •μƒ μΆ…λ£](test_img/μ •μƒ%20μΆ…λ£.JPG) |

---

## π“© λ¬Έμ
κ¶κΈν• μ μ΄λ‚ λ¬Έμ μ‚¬ν•­μ€ μ•„λ μ΄λ©”μΌλ΅ μ—°λ½ μ£Όμ‹λ©΄ μ„±μ‹¤ν λ‹µλ³€λ“λ¦¬κ² μµλ‹λ‹¤!  
π“§ **siunm6610@naver.com**

---
